{"version":3,"file":"Meister.js","sources":["../src/js/Configuration.js","../src/js/plugin-types/ProtoPlugin.js","../src/js/plugin-types/Media.js","../src/js/Parallel.js","../src/js/PluginLoader.js","../node_modules/noop2/index.js","../src/js/lib/triple/event-handler.js","../src/js/events/ad-events.js","../src/js/events/control-events.js","../src/js/events/item-events.js","../src/js/events/global-events.js","../src/js/events/player-events.js","../src/js/events/playlist-events.js","../src/js/events/ui-events.js","../src/js/events/default-events.js","../src/js/InstanceBag.js","../src/js/ExtraEvents.js","../src/js/utils/Utils.js","../src/js/utils/ElementUtils.js","../src/js/utils/Browser.js","../src/js/utils/BrowserPolyfill.js","../src/js/Playlist.js","../src/js/MediaController.js","../src/js/FullscreenController.js","../src/js/lib/triple/cookie.js","../src/js/errorCodes.js","../src/js/localization/default-en.js","../src/js/localization/default-nl.js","../src/js/localization/i18n.js","../src/js/Localization.js","../src/js/plugin-types/Analytics.js","../src/js/plugin-types/Parser.js","../src/js/plugin-types/Player.js","../src/js/plugin-types/Ui.js","../src/js/plugin-types/UiPlugin.js","../src/js/plugin-types/Middleware.js","../src/js/Meister.js"],"sourcesContent":["const ENVIRONMENT = 'development';\n\nconst store = {\n    production: {\n        global: {\n            autoplay: false,\n            controls: true,\n            startMuted: false,\n            debug: false,\n            audioOnly: false,\n        },\n        dash: {\n            dvrThreshold: 300,\n            dvrEnabled: true,\n        },\n        hls: {\n            dvrEnabled: true,\n        },\n    },\n\n    development: {\n        global: {\n            autoplay: false,\n            controls: true,\n            startMuted: false,\n            debug: false,\n            audioOnly: false,\n        },\n        dash: {\n            dvrThreshold: 300,\n            dvrEnabled: true,\n        },\n        hls: {\n            dvrEnabled: true,\n        },\n    },\n};\n\n\nclass Configuration {\n\n    static set(key, value) {\n        store[ENVIRONMENT][key] = value;\n    }\n\n    static get(key) {\n        return store[ENVIRONMENT][key];\n    }\n\n    static getGlobals(options) {\n        Object.keys(options).forEach((key) => {\n            store[ENVIRONMENT].global[key] = options[key];\n        });\n\n        return store[ENVIRONMENT].global;\n    }\n\n    static overwrite(plugins) {\n        // For all plugins..\n        Object.keys(plugins).forEach((plugin) => {\n            if (!store[ENVIRONMENT][plugin]) {\n                // If not, create a new config object and move on\n                store[ENVIRONMENT][plugin] = plugins[plugin];\n                return;\n            }\n\n            Object.keys(plugins[plugin]).forEach((config) => {\n                store[ENVIRONMENT][plugin][config] = plugins[plugin][config];\n            });\n        });\n    }\n\n    static getAll() {\n        return store[ENVIRONMENT];\n    }\n}\n\nexport default Configuration;\n","class ProtoPlugin {\n    constructor(config, meister) {\n        this.config = config;\n        this.meister = meister;\n        this.name = this.config.name;\n\n        this.eventStore = [];\n\n        // Don't store this in the eventStore as this messes up unloading of several child classes.\n        this.meister.on('requestDestroy', this.destroy.bind(this), this.name);\n    }\n\n    on(hook, handler) {\n        this.eventStore.push(...this.meister.on(hook, handler, this.name));\n    }\n\n    one(hook, block, handler) {\n        this.eventStore.push(this.meister.one(hook, block, handler, this.name));\n    }\n\n    unload() {\n        this.meister.remove(this.eventStore);\n        this.eventStore = [];\n    }\n\n    destroy() {\n        this.unload();\n    }\n}\n\nexport default ProtoPlugin;\n","import ProtoPlugin from './ProtoPlugin';\n\nclass Media extends ProtoPlugin {\n    /**\n     * Checking if an item is supported by the plugin\n     * @return {boolean} Default always returns false.\n     */\n    isItemSupported() {\n        return new Promise((resolve) => resolve({\n            supported: false,\n            errorCode: Meister.ErrorCodes.WRONG_TYPE,\n        }));\n    }\n\n    get currentItem() {\n        console.error(`${this.name} does not support this method.`);\n        return null;\n    }\n\n    /**\n     * Process is for reading metadata/parsing\n     */\n    process(item) {\n        return new Promise((resolve) => {\n            console.warn('Process not implemented. Player may not play correctly.');\n            resolve(item);\n        });\n    }\n\n    /**\n     * Registers events and prepares for play.\n     */\n    load(item) {\n        if (this.meister.config.debug) {\n            console.log(`Loading item with type '${item.type}' and src '${item.src}'`);\n        }\n        if (Number.isFinite(item.startPosition)) {\n            this.startPosition = item.startPosition;\n        }\n        this.on('playerLoadedMetadata', () => this.playerLoadedMetadata());\n\n        this.blockSeekForward = !!item.blockSeekForward;\n    }\n\n    playerLoadedMetadata() {\n        // when startPosition is within the duration of the current video\n        if (this.startPosition > 0 && this.player.duration > this.startPosition) {\n            this.meister.trigger('requestSeek', {\n                targetTime: this.startPosition,\n                forcedStart: true,\n            });\n        }\n    }\n\n    /**\n     * Unloads events that you dont need anymore.\n     */\n    unload() {\n        super.unload();\n        this.startPosition = null;\n        this.blockSeekForward = false;\n    }\n\n    /**\n     * Destroys the whole plugin.\n     */\n    destroy() {\n        super.destroy();\n    }\n}\n\nexport default Media;\n","// import PluginLoader from './plugin-loader';\nimport MediaPlugin from './plugin-types/Media';\n\nclass Parallel extends MediaPlugin {\n    constructor(meister) {\n        super({ name: 'parallel-builtin' }, meister);\n\n        this.meister = meister;\n        this.plugins = [];\n\n        this.bitrates = null;\n        this.currentBitrateIndex = 0;\n\n        this.plugin = null;\n\n        this.eventStore = [];\n    }\n\n    isItemSupported(item) {\n        return new Promise((resolve) => {\n            if (item.type !== 'media') {\n                return resolve({\n                    supported: false,\n                    errorCode: Meister.ErrorCodes.WRONG_TYPE,\n                });\n            }\n\n            return resolve({\n                supported: true,\n            });\n        });\n    }\n\n    get currentItem() {\n        if (this.plugin) {\n            return this.plugin.currentItem;\n        }\n\n        return null;\n    }\n\n    process(item) {\n        return new Promise((resolve, reject) => {\n            const processPromises = [];\n\n            this.bitrates = item.bitrates;\n            this.currentBitrateIndex = Math.floor(this.bitrates.length / 2);\n\n            // Don't trigger bitrates for hls media.\n            const sampleItem = this.bitrates[this.currentBitrateIndex];\n\n            if (sampleItem.type !== 'm3u'\n                && sampleItem.type !== 'm3u8'\n                && sampleItem.type !== 'mpd'\n                && sampleItem.type !== 'dash'\n                && sampleItem.metadata\n            ) {\n                this.bitrates.sort((a, b) => a.metadata.bitrate - b.metadata.bitrate);\n\n                const selectableBitrates = [];\n                for (let i = 0; i < this.bitrates.length; i++) {\n                    const bitrate = this.bitrates[i];\n\n                    // If there is a defalt bitrate specified prefer that.\n                    if (bitrate.default) {\n                        this.currentBitrateIndex = i;\n                    }\n\n                    selectableBitrates.push({\n                        bitrate: bitrate.metadata.bitrate,\n                        index: i,\n                    });\n                }\n\n                this.meister.trigger('itemBitrates', {\n                    bitrates: selectableBitrates,\n                    currentIndex: this.currentBitrateIndex,\n                });\n            }\n\n            this.meister.pluginLoader.getPluginByItem(this.bitrates[this.currentBitrateIndex])\n                .then((itemPlugin) => {\n                    if (itemPlugin.errorCode) {\n                        this.meister.error(`Could not find plugin to play type: '${this.bitrates[this.currentBitrateIndex].type}'.`, //eslint-disable-line\n                            itemPlugin.errorCode, { title: 'Unable to play content.' });\n                        return;\n                    }\n\n                    this.plugin = itemPlugin;\n\n                    const getPluginsPromises = [];\n\n                    processPromises.push(\n                        this.plugin.process(this.bitrates[this.currentBitrateIndex])\n                    );\n\n                    // Get all plugins for each parallelItem\n                    item.parallel.forEach((parallelItem) => {\n                        const plugin = this.meister.pluginLoader.getPluginByItem(parallelItem);\n                        if (plugin.errorCode) {\n                            return;\n                        }\n\n                        getPluginsPromises.push(plugin);\n                    });\n\n                    Promise.all(getPluginsPromises).then((plugins) => {\n                        // Process all plugins..\n                        plugins.forEach((plugin, index) => {\n                            if (!plugin.errorCode) {\n                                this.plugins.push(plugin);\n\n                                processPromises.push(plugin.process(item.parallel[index]));\n                            }\n                        });\n\n                        Promise.all(processPromises)\n                            .then(() => {\n                                resolve(item);\n                            })\n                            .catch((err) => {\n                                reject(err);\n                            });\n                    });\n                });\n        });\n    }\n\n    load(item) {\n        this.plugin.load(this.bitrates[this.currentBitrateIndex]);\n\n        this.plugins.forEach((plugin, index) => {\n            // XXX: Not sure if this should work.\n            plugin.load(item.parallel[index]);\n        });\n\n        if (!this.plugin.onRequestBitrate) {\n            this.on('requestBitrate', (info) => this.onRequestBitrate(info.bitrateIndex));\n        }\n    }\n\n    unload() {\n        super.unload();\n\n        // Unload the main plugin.\n        if (this.plugin) this.plugin.unload();\n\n        // Unload parallel plugins.\n        this.plugins.forEach((plugin) => {\n            plugin.unload();\n        });\n\n        this.plugins = [];\n    }\n\n    onRequestBitrate(index) {\n        // No need to do anything when the same bitrate is requested.\n        if (this.currentBitrateIndex === index) {\n            return;\n        }\n\n        this.currentBitrateIndex = index;\n\n        if (this.plugin && this.plugin.changeBitrate) {\n            this.plugin.changeBitrate(this.currentBitrateIndex);\n            return;\n        }\n\n        // Assuming variant bitrates are the same type\n        const switchTime = this.meister.currentTime;\n        const wasPlaying = this.meister.playing;\n\n        // HACK: This can be done way prettier.\n        this.plugin.unload();\n        this.plugin.load(this.bitrates[this.currentBitrateIndex]);\n        this.meister.currentTime = switchTime;\n        if (wasPlaying) this.meister.play();\n\n        const newBitrate = this.bitrates[this.currentBitrateIndex].metadata\n            ? this.bitrates[this.currentBitrateIndex].metadata.bitrate\n            : 0;\n\n        this.meister.trigger('playerSwitchBitrate', {\n            newBitrate,\n            newBitrateIndex: index,\n        });\n    }\n}\n\nexport default Parallel;\n","import Configuration from './Configuration';\nimport Parallel from './Parallel';\n\nconst registered = [];\nconst loaded = [];\n\nconst registeredMiddleware = [];\n\nclass PluginLoader {\n\n    constructor(meister) {\n        this.loaded = [];\n        this.meister = meister;\n    }\n\n    static getRegistered() {\n        return registered;\n    }\n\n    static getLoaded() {\n        return loaded;\n    }\n\n    static get(name) {\n        return registered.find(plugin => (plugin.name === name));\n    }\n\n    getLoadedPlugin(name) {\n        return this.loaded.find(plugin => (plugin.name === name));\n    }\n\n    static getMiddleware(name) {\n        return registeredMiddleware.find(plugin => (plugin.name === name));\n    }\n\n    config(options, instance) {\n        // Merge with the builtIn plugins\n        const newOptions = {};\n        if (Meister.builtIn) {\n            Object.keys(Meister.builtIn).forEach((key) => {\n                if (options[key]) {\n                    return;\n                }\n\n                newOptions[key] = Meister.builtIn[key];\n            });\n        }\n\n        Object.assign(newOptions, options);\n\n        Object.keys(newOptions).forEach((key) => {\n            const plugin = PluginLoader.get(key);\n\n            if (!plugin) {\n                if (key !== 'global') {\n                    console.warn(`${key} is not a registered plugin.`);\n                }\n\n                return;\n            }\n\n            let pluginConfig = {};\n            pluginConfig = Configuration.get(key);\n            pluginConfig.name = key;\n\n            const next = (item) =>\n                PluginLoader.execMiddleware(pluginConfig.middleware, instance, item);\n\n            this.loaded.push({\n                name: plugin.name,\n                plugin: new plugin.Plugin(pluginConfig, instance, next),\n                middleware: pluginConfig.middleware,\n            });\n        });\n\n        // Register built-in plugins.\n        this.loaded.push({\n            name: 'parallel',\n            plugin: new Parallel(instance),\n        });\n    }\n\n    static execMiddleware(middlewares, instance, item) {\n        const result = [];\n\n        // No middlewares? Just return the item. This way we fake a middleware.\n        if (!middlewares || !middlewares.length) {\n            return new Promise((resolve) => {\n                resolve(item);\n            });\n        }\n\n        middlewares.forEach((middleware) => {\n            const middlewareObject = this.getMiddleware(middleware);\n\n            result.push(new middlewareObject.Middleware({}, instance));\n        });\n\n        return this.processMiddlewares(result, item);\n    }\n\n    static processMiddlewares(middlewares, item, index = 0) {\n        return middlewares[index].process(item).then((newItem) => {\n            if (middlewares[index + 1]) {\n                return this.processMiddlewares(middlewares, newItem, index + 1);\n            }\n\n            return newItem;\n        });\n    }\n\n    getPluginByItem(item) {\n        // When DRM is set on an item, let the player know.\n        if (item.drmConfig) {\n            this.meister.trigger('drmConfig', item.drmConfig);\n        }\n\n        const isItemSupportedPromises = [];\n        const pluginsInConsideration = [];\n\n        // Add all plugin which have the isItemSupported method to a promise array.\n        this.loaded.forEach((plugin) => {\n            if (plugin.plugin.isItemSupported) {\n                pluginsInConsideration.push(plugin);\n                const isSupported = plugin.plugin.isItemSupported(item);\n\n                isItemSupportedPromises.push(isSupported);\n            }\n        });\n\n        // Go through all the items and search for a plugin that can handle the item.\n        return Promise.all(isItemSupportedPromises).then((items) => {\n            // Search for the plugin that returned true and map that to the loaded plugins\n            let errorCode = Meister.ErrorCodes.WRONG_TYPE;\n            for (let i = 0; i < items.length; i++) {\n                const supportInfo = items[i];\n\n                if (supportInfo.supported) {\n                    return pluginsInConsideration[i].plugin;\n                }\n\n                if (supportInfo.errorCode !== Meister.ErrorCodes.WRONG_TYPE) {\n                    errorCode = supportInfo.errorCode;\n                }\n            }\n\n            return { errorCode };\n        });\n    }\n\n    getPlayerPluginByType(type) {\n        const playerPlugin = this.loaded.find((plugin) => {\n            if (plugin.plugin.isTypeSupported) {\n                return plugin.plugin.isTypeSupported(type);\n            }\n\n            return false;\n        });\n\n        return playerPlugin ? playerPlugin.plugin : null;\n    }\n\n    drawUiPlugins() {\n        this.loaded.forEach((plugin) => {\n            if (plugin.plugin.draw) {\n                plugin.plugin.draw();\n            }\n        });\n    }\n\n    loadAnalyticsPlugins() {\n        this.loaded.forEach((plugin) => {\n            if (plugin.plugin.isAnalytics) {\n                plugin.plugin.load();\n            }\n        });\n    }\n\n    static register(name, plugin) {\n        if (this.get(name)) {\n            throw new Error(`Plugin ${name} is already registered. Having the same name?`);\n        }\n\n        registered.push({\n            name,\n            Plugin: plugin,\n        });\n    }\n\n    static registerMiddleware(name, middleware) {\n        if (this.getMiddleware(name)) {\n            throw new Error(`Middleware ${name} is already registered. Having the same name?`);\n        }\n\n        registeredMiddleware.push({\n            name,\n            Middleware: middleware,\n        });\n    }\n}\n\nexport default PluginLoader;\n","module.exports = noop\n\n// no operation\n// null -> null\nfunction noop() {}\n\n// call noop to satisfy test cov suites\nnoop()\n","import noop from 'noop2';\n\nclass EventHandler {\n    constructor(eventHooks) {\n        this.counter = 0;\n        this.disabledHandles = [];\n\n        // Protected handles are callbacks that cannot be blocked and thus\n        // protected.\n        this.protectedHandles = {};\n\n        // Register the default event hooks.\n        this.stack = {};\n        for (let i = 0; i < eventHooks.length; i++) {\n            let eventHook = eventHooks[i];\n\n            this.stack[eventHook] = [];\n        }\n    }\n\n    on(hooks, method, caller = 'Anonymous') {\n        // Check whether the method is a function.\n        if (!(method instanceof Function)) {\n            console.error('EventHandler: Provided handler is not a function.');\n            return;\n        }\n\n        // Convert hooks to an array to keep flow similar.\n        if (!(hooks instanceof Array)) {\n            hooks = [hooks];\n        }\n\n        // Register the handle on all hooks.\n        let newHandles = [];\n        for (let i = 0; i < hooks.length; i++) {\n            let hook = hooks[i];\n\n            if (!this.stack[hook]) {\n                this.stack[hook] = [];\n            }\n\n            let newHandle = this._createHandler(caller, method);\n            this.stack[hook].push(newHandle);\n\n            newHandles.push({\n                id: newHandle.id,\n                hook: hook,\n            });\n        }\n\n        // Return an array of objects that can be used to remove the handlers.\n        return newHandles;\n    }\n\n    one(hook, block, method, caller = 'Anonymous') {\n        // Check whether block is present, if not change parameters\n        if (typeof block !== 'boolean') {\n            caller = method;\n            method = block;\n            block = false;\n        }\n\n        // Check whether the method is a function.\n        if (!(method instanceof Function)) {\n            console.error('EventHandler: Provided handler is not a function.');\n            return;\n        }\n\n        if (!this.stack[hook]) {\n            this.stack[hook] = [];\n        }\n\n        if (!this.stack[hook].one) {\n            this.stack[hook].one = [];\n        }\n\n        let newHandle = this._createHandler(caller, method, block);\n        this.stack[hook].one.push(newHandle);\n\n        // Return an object that can be used to remove the handler.\n        return {\n            id: newHandle.id,\n            hook: hook,\n        };\n    }\n\n    _createHandler(caller, method, block = false) {\n        let newHandle = {\n            id: this.counter,\n            caller: caller,\n            method: method,\n            block: block,\n        };\n\n        this.counter++;\n\n        return newHandle;\n    }\n\n    remove(events) {\n        // Convert hooks to an array to keep flow similar.\n        if (!(events instanceof Array)) events = [events];\n\n        for (let i = 0; i < events.length; i++) {\n            let eventObject = events[i];\n            let removed = false;\n\n            // First check the single handlers.\n            if (this.stack[eventObject.hook].one) {\n                for (let i = 0; i < this.stack[eventObject.hook].one.length; i++) {\n                    let trigger = this.stack[eventObject.hook].one[i];\n\n                    // Since ID's are unique break after finding one.\n                    if (trigger.id === eventObject.id) {\n                        this.stack[eventObject.hook].one.splice(i, 1);\n                        removed = true;\n                        break;\n                    }\n                }\n\n                // No more single handlers so delete the array.\n                if (this.stack[eventObject.hook].one.length === 0) {\n                    delete this.stack[eventObject.hook].one;\n                }\n\n                // Again, since ID's are unique don't bother checking the rest after removing one.\n                if (removed) continue;\n            }\n\n            // Now check regular handlers.\n            for (let i = 0; i < this.stack[eventObject.hook].length; i++) {\n                let trigger = this.stack[eventObject.hook][i];\n\n                // Since ID's are unique break after finding one.\n                if (trigger.id === eventObject.id) {\n                    this.stack[eventObject.hook].splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }\n\n    trigger(...args) {\n        // Extract the first element as the hook.\n        let hook = args.splice(0, 1)[0];\n\n        // Check whether the event exists.\n        if (!this.stack[hook]) {\n            // console.warn(`EventHandler: '${hook}' is not a registered event.`);\n            return;\n        }\n\n        // Check whether the event has been disabled.\n        if (this.disabledHandles.indexOf(hook) !== -1) {\n\n            // Check whether we have a protected handler if we do trigger that.\n            if (this.protectedHandles[hook]) {\n                this.protectedHandles[hook](args);\n            }\n\n            console.debug(`EventHandler: '${hook}' is disabled, skipping trigger`);\n            return;\n        }\n\n        // Check whether there are any registered handlers.\n        if (this.stack[hook].length === 0 && !this.stack[hook].one) {\n            // console.debug(`EventHandler: no handlers registered for '${hook}'`);\n            return;\n        }\n\n        if (this.stack[hook].one) {\n            let block = false;\n\n            for (var i = 0; i < this.stack[hook].one.length; i++) {\n                let single = this.stack[hook].one[i];\n\n                // Only check for blocking when not already blocked.\n                if (!block) block = single.block;\n\n                try {\n                    single.method.apply(null, args);\n                } catch (e) {\n                    console.error(`EventHandler: Handle from '${single.caller}' for '${hook}' failed. Error: ${e}`);\n                }\n            }\n\n            delete this.stack[hook].one;\n\n            // Should block, do not trigger regular handlers.\n            if (block) return;\n        }\n\n        // Trigger all regular handles associated with the hook.\n        for (let i = 0; i < this.stack[hook].length; i++) {\n            let eventHandle = this.stack[hook][i];\n\n            try {\n                eventHandle.method.apply(null, args);\n            } catch (e) {\n                console.error(`EventHandler: Handle from '${eventHandle.caller}' for '${hook}' failed. Error: ${e}`);\n            }\n        }\n    }\n\n    disable(hook, callback = noop) {\n        this.protectedHandles[hook] = callback;\n\n        if (this.disabledHandles.indexOf(hook) === -1) {\n            this.disabledHandles.push(hook);\n        }\n    }\n\n    enable(hook) {\n        this.protectedHandles[hook] = noop;\n\n        let hookIndex = this.disabledHandles.indexOf(hook);\n\n        if (hookIndex !== -1) {\n            this.disabledHandles.splice(hookIndex, 1);\n        }\n    }\n}\n\nexport default EventHandler;\n","const AdEvents = [\n    'adBreakStarted',\n    'adBreakEnded',\n    'adStarted',\n    'adEnded',\n    'adTimeupdate',\n    'adCuePoints',\n];\n\nexport default AdEvents;\n","const ControlEvents = [\n    'requestPlay',\n    'requestSeek',\n    'requestPause',\n    'requestBitrate',\n];\n\nexport default ControlEvents;\n","const ItemEvents = [\n    'itemLoadPrevented',\n    'itemLoaded',\n    'itemUnloaded',\n    'itemMetadata',\n    'itemTimeInfo',\n    'itemLanguages',\n    'itemCaptions',\n    'itemBitrates',\n    'itemImagestream',\n];\n\nexport default ItemEvents;\n","const GlobalEvents = [\n    'windowFocusChange',\n    'windowVisibilityChange',\n];\n\nexport default GlobalEvents;\n","const PlayerEvents = [\n    'playerCreated',\n    'playerDestroyed',\n    '_playerTimeUpdate',\n    'playerTimeUpdate',\n    'playerPlay',\n    'playerPlaying',\n    'playerPause',\n    '_playerSeek',\n    'playerSeek',\n    'playerNudge',\n    'playerEnd',\n    'playerError',\n    'playerVolumeChange',\n    'playerFullscreen',\n    'playerSwitchBitrate',\n    'playerAutoSwitchBitrate',\n    'playerProgress',\n    'playerLoadedMetadata',\n    'playerDurationChange',\n    'playerBuffering',\n    'playerBufferedEnough',\n];\n\nexport default PlayerEvents;\n","const PlaylistEvents = [\n    'playlistInfo',\n    'playlistNext',\n    'playlistPrevious',\n    'playlistGoTo',\n    'playlistMetadata',\n];\n\nexport default PlaylistEvents;\n","const UiEvents = [\n    'uiReady',\n    'uiPluginInserted',\n    'uiPluginOpen',\n    'uiPluginClose',\n];\n\nexport default UiEvents;\n","import AdEvents from './ad-events';\nimport ControlEvents from './control-events';\nimport ItemEvents from './item-events';\nimport GlobalEvents from './global-events';\nimport PlayerEvents from './player-events';\nimport PlaylistEvents from './playlist-events';\nimport UiEvents from './ui-events';\n\nconst EventDefaults = [];\n\nEventDefaults.push(...AdEvents);\nEventDefaults.push(...ControlEvents);\nEventDefaults.push(...ItemEvents);\nEventDefaults.push(...GlobalEvents);\nEventDefaults.push(...PlayerEvents);\nEventDefaults.push(...PlaylistEvents);\nEventDefaults.push(...UiEvents);\n\nexport default EventDefaults;\n","const store = [];\n\nclass InstanceBag {\n    static add(key, value) {\n        store[key] = value;\n    }\n\n    static get(key) {\n        return store[key];\n    }\n}\n\nexport default InstanceBag;\n","// import InstanceBag from './instance-bag';\n\nclass ExtraEvents {\n    static register(meisterInstance) {\n        // windowFocusChange\n        window.onfocus = () => {\n            meisterInstance.eventHandler.trigger('windowFocusChange', {\n                onForeground: true,\n            });\n        };\n\n        window.onblur = () => {\n            meisterInstance.eventHandler.trigger('windowFocusChange', {\n                onForeground: false,\n            });\n        };\n\n        // windowVisibilityChange\n        document.addEventListener('visibilitychange', () => {\n            meisterInstance.eventHandler.trigger('windowVisibilityChange', {\n                visibility: document.visibilityState,\n            });\n        });\n\n        document.addEventListener('webkitfullscreenchange', () => {\n            meisterInstance.eventHandler.trigger('playerFullscreen');\n        });\n\n        document.addEventListener('mozfullscreenchange', () => {\n            meisterInstance.eventHandler.trigger('playerFullscreen');\n        });\n\n        document.addEventListener('fullscreenchange', () => {\n            meisterInstance.eventHandler.trigger('playerFullscreen');\n        });\n\n        document.addEventListener('MSFullscreenchange', () => {\n            meisterInstance.eventHandler.trigger('playerFullscreen');\n        });\n    }\n}\n\nexport default ExtraEvents;\n","export function timeToHMS(time) {\n    if (isNaN(time)) return '-';\n\n    const hours = Math.floor(time / 3600);\n    let minutes = Math.floor((time - (hours * 3600)) / 60);\n    let seconds = time - (hours * 3600) - (minutes * 60);\n\n    if (hours !== 0 && minutes < 10) {\n        minutes = `0${minutes}`;\n    }\n    if (seconds < 10) {\n        seconds = `0${seconds}`;\n    }\n\n    if (hours !== 0) {\n        return `${hours}:${minutes}:${seconds}`;\n    }\n\n    return `${minutes}:${seconds}`;\n}\n\nexport function bitrateToResolution(bitrate) {\n    // A negative bitrate does not make sense\n    if (bitrate < 0) {\n        return NaN;\n    }\n\n    const kbps = bitrate / 1000;\n    return `${kbps}Kbps`;\n\n    // let bitsps = bitrate * 8;\n    // let e = Math.floor(Math.log(bitsps) / Math.log(1000));\n    // let mbits = bitsps / Math.pow(1000, Math.floor(e));\n\n    // Following what we assume the platform outputs:\n    // https://www.theplatform.com/blog/publishing-mpx-accelerate/\n    // if (mbits <= 2) {\n    //     return '240p';\n    // } else if (mbits <= 4.5) {\n    //     return '360p';\n    // } else if (mbits <= 9) {\n    //     return '480p';\n    // } else if (mbits <= 13) {\n    //     return '720p';\n    // } else {\n    //     return '1080p';\n    // }\n\n\n    // Roughly following youtube guidelines:\n    // https://support.google.com/youtube/answer/1722171?hl=en\n    // if (mbits <= 2) {\n    //     return '360p';\n    // } else if (mbits <= 5) {\n    //     return '480p';\n    // } else if (mbits <= 8) {\n    //     return '720p';\n    // } else if (mbits <= 16) {\n    //     return '1080p';\n    // } else if (mbits <= 35) {\n    //     return '1440p';\n    // } else {\n    //     return '2160p';\n    // }\n}\n\n/**\n * Constructs a new URI by interpreting a path relative to another\n * URI.\n * @param basePath {string} a relative or absolute URI\n * @param path {string} a path part to combine with the base\n * @return {string} a URI that is equivalent to composing `base`\n * with `path`\n * @see http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue\n */\nexport function resolveUrl(basePath, path) {\n    // use the base element to get the browser to handle URI resolution\n    const oldBase = document.querySelector('base');\n    const docHead = document.querySelector('head');\n    const a = document.createElement('a');\n    let base = oldBase;\n    let oldHref;\n\n    // prep the document\n    if (oldBase) {\n        oldHref = oldBase.href;\n    } else {\n        base = docHead.appendChild(document.createElement('base'));\n    }\n\n    base.href = basePath;\n    a.href = path;\n    const result = a.href;\n\n    // clean up\n    if (oldBase) {\n        oldBase.href = oldHref;\n    } else {\n        docHead.removeChild(base);\n    }\n    return result;\n}\n\n/**\n * Simple evaluator if the given element is\n * an node object or not and returns a Boolean.\n * @param node {any} anything that will be evaluated if it is a Node Object\n * @see http://stackoverflow.com/a/384380\n*/\nexport function isDOMNode(node) {\n    try {\n        return node instanceof HTMLElement;\n    } catch (e) {\n        return (typeof node === 'object') &&\n            (node.nodeType === 1) && (typeof node.style === 'object') &&\n            (typeof node.ownerDocument === 'object');\n    }\n}\n\n/*\n    Exports\n------------------------------------------ */\nexport default {\n    timeToHMS,\n    bitrateToResolution,\n    resolveUrl,\n    isDOMNode,\n};\n","class ElementUtils {\n    static classListAdd(element, ...classNames) {\n        for (let i = 0; i < classNames.length; i++) {\n            const className = classNames[i];\n\n            element.classList.add(className);\n        }\n    }\n\n    static classListRemove(element, ...classNames) {\n        for (let i = 0; i < classNames.length; i++) {\n            const className = classNames[i];\n\n            element.classList.remove(className);\n        }\n    }\n}\n\nexport default ElementUtils;\n","// 'Inspired' by https://github.com/clappr/clappr/blob/master/src/components/browser.js\n\nconst Browser = {};\n\nconst userAgent = navigator.userAgent;\n\nconst browserInfo = () => {\n    const uaRegEx = /\\b(playstation 4|nx|opera|chrome|edge|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i; //eslint-disable-line\n    let parts = userAgent.match(uaRegEx) || [];\n    let extra;\n\n    if (/trident/i.test(parts[1])) {\n        extra = /\\brv[ :]+(\\d+)/g.exec(userAgent) || [];\n        return { name: 'IE', version: parseInt(extra[1] || '', 10) };\n    } else if (parts[1] === 'Chrome') {\n        extra = userAgent.match(/\\bOPR\\/(\\d+)/);\n        if (extra !== null) {\n            return { name: 'Opera', version: parseInt(extra[1], 10) };\n        }\n\n        extra = userAgent.match(/\\bEdge\\/(\\d+\\.\\d+)/);\n        if (extra !== null) {\n            return { name: 'Edge', version: parseFloat(extra[1]) };\n        }\n    }\n    parts = parts[2] ? [parts[1], parts[2]] : [navigator.appName, navigator.appVersion, '-?'];\n\n    extra = userAgent.match(/version\\/(\\d+)/i);\n    if (extra) {\n        parts.splice(1, 1, extra[1]);\n    }\n\n    return { name: parts[0], version: parseInt(parts[1], 10) };\n};\n\nconst info = browserInfo();\n\nBrowser.isSafari = /safari/i.test(userAgent) && userAgent.indexOf('Chrome') === -1;\nBrowser.isEdge = /edge/i.test(userAgent);\nBrowser.isChrome = /chrome/i.test(userAgent) && !Browser.isEdge;\nBrowser.isChrome64 = Browser.isChrome && /\\bx64/i.test(userAgent);\nBrowser.isFirefox = /firefox/i.test(userAgent);\nBrowser.isLegacyIE = !!(window.ActiveXObject);\nBrowser.isIE = Browser.isLegacyIE || /trident.*rv:1\\d/i.test(userAgent);\nBrowser.isIE11 = /trident.*rv:11/i.test(userAgent);\nBrowser.isChromecast = Browser.isChrome && /CrKey/i.test(userAgent);\nBrowser.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Opera Mini/i.test(userAgent); //eslint-disable-line\nBrowser.isiOS = /iPad|iPhone|iPod/i.test(userAgent);\n\nBrowser.isAndroid = /Android/i.test(userAgent);\nBrowser.isWindowsPhone = /Windows Phone/i.test(userAgent);\nBrowser.isWin8App = /MSAppHost/i.test(userAgent);\nBrowser.isWiiU = /WiiU/i.test(userAgent);\nBrowser.isPS4 = /PlayStation 4/i.test(userAgent);\nBrowser.isSamsungBrowser = /SamsungBrowser/i.test(userAgent);\nBrowser.isSamsung = /SAMSUNG/i.test(userAgent);\nBrowser.isMacintosh = /Macintosh/i.test(userAgent);\n\nBrowser.name = info.name;\nBrowser.version = info.version;\n\nexport default Browser;\n","class BrowserPolyfill {\n    static init() {\n        if (!('remove' in Element.prototype)) {\n            Element.prototype.remove = function remove() {\n                if (this.parentNode) {\n                    this.parentNode.removeChild(this);\n                }\n            };\n        }\n    }\n}\n\nexport default BrowserPolyfill;\n","class Playlist {\n    constructor(list, meister) {\n        this.list = list;\n        this.meister = meister;\n\n        this.index = 0;\n\n        this.meister.on('playlistNext', () => this.next());\n        this.meister.on('playlistPrevious', () => this.previous());\n        this.meister.on('playlistGoTo', (e) => this.goTo(e.index));\n\n        this.meister.on('playerEnd', () => {\n            if (this.meister.config.autoplay && this.index < this.list.length - 1) {\n                this.next();\n            }\n        });\n    }\n\n    loadCurrentIndex() {\n        this.meister.trigger('showLoading', {\n            code: 'INITIALIZING',\n        });\n\n        const item = this.list[this.index];\n        this.getPluginFor(item).then((plugin) => {\n            this.meister.trigger('playlistMetadata', item);\n\n            // Check whether it is a parsing plugin\n            if (plugin instanceof Meister.ParserPlugin) {\n                plugin.process(item)\n                .then((newItem) => {\n                    if (newItem instanceof Array) {\n                        // Replace the current index with the returned array.\n                        const newList = this.list.slice(0, this.index);\n                        newList.push(...newItem);\n                        newList.push(...this.list.slice(this.index + 1));\n\n                        this.list = newList;\n                    } else {\n                        this.list[this.index] = newItem;\n                    }\n\n                    this.loadCurrentIndex();\n                    return;\n                })\n                .catch((err) => {\n                    console.error(`Could not process item with type: ${item.type} and src: ${item.src}. \\n${err}`);\n                });\n            } else if (plugin instanceof Meister.MediaPlugin) {\n                // Not very idiomatic.\n                this.meister.switchItem(item);\n\n                // Inform player of the state of the playlist.\n                this.meister.trigger('playlistInfo', {\n                    currentIndex: this.index,\n                    length: this.list.length,\n                });\n\n                return;\n            }\n        }).catch((err) => {\n            this.meister.error(`Could not find plugin to play type: '${item.type}'.`,\n                err.errorCode, { title: 'Unable to play content.' });\n            console.error(`Could not load item with type: '${item.type}' and src: '${item.src}'.`);\n        });\n    }\n\n    next() {\n        const newIndex = this.index + 1;\n        this.goTo(newIndex);\n    }\n\n    previous() {\n        const newIndex = this.index - 1;\n        this.goTo(newIndex);\n    }\n\n    goTo(newIndex) {\n        if (newIndex < 0 || newIndex >= this.list.length) {\n            console.error(`Playlist index '${newIndex}' is out of bounds.`);\n            return;\n        }\n\n        this.index = newIndex;\n        this.loadCurrentIndex();\n    }\n\n    getPluginFor(item) {\n        return this.meister.pluginLoader.getPluginByItem(item).then((result) => {\n            if (result.errorCode) {\n                throw result;\n            }\n\n            return result;\n        });\n    }\n}\n\nexport default Playlist;\n","// import PluginLoader from './plugin-loader';\n\nclass MediaController {\n    constructor(meister) {\n        this.meister = meister;\n\n        this.currentPlugin = null;\n\n        // Keep track of whether an ad is playing.\n        this.adBreakPlaying = false;\n        this.meister.on('adBreakStarted', () => {\n            this.adBreakPlaying = true;\n        });\n\n        this.meister.on(['adBreakEnded', 'itemUnloaded'], () => {\n            this.adBreakPlaying = false;\n        });\n    }\n\n    loadNewItem(item) {\n        if (this.meister.config.disableLoadDuringAd && this.adBreakPlaying) {\n            this.meister.trigger('itemLoadPrevented', { error: 'adPlaying' });\n            console.warn('Unable to switch content while ad is playing');\n            return;\n        }\n\n        // Unload the previous plugin should it be present.\n        if (this.plugin) {\n            this.plugin.unload();\n            this.plugin = null;\n        }\n        // Signal to the rest of the player that the item is now unloaded.\n        this.meister.trigger('itemUnloaded');\n\n        this.getPluginFor(item).then((plugin) => {\n            this.plugin = plugin;\n\n            this.plugin.process(item)\n                .then((processedItem) => {\n                    const promise = this.plugin.load(processedItem);\n\n                    if (promise) {\n                        promise.then(() => {\n                            this.meister.trigger('itemLoaded', { item: processedItem });\n                        });\n                    } else {\n                        this.meister.trigger('itemLoaded', { item: processedItem });\n                    }\n                })\n                .catch((err) => {\n                    this.meister.error(`Could not find plugin to play type: '${item.type}'.`,\n                        err.errorCode, { title: 'Unable to play content.' });\n                    console.error(`@${this.plugin.name}: Could not load item with type: '${item.type}' and src: '${item.src}'.`); //eslint-disable-line\n                });\n        });\n    }\n\n    switchItem(newItem) {\n        this.loadNewItem(newItem);\n    }\n\n    get currentItem() {\n        if (this.plugin && this.plugin.currentItem) {\n            return this.plugin.currentItem;\n        }\n\n        console.warn(`${this.plugin.name} does not provide metadata.`);\n        return {};\n    }\n\n    getPluginFor(item) {\n        return this.meister.pluginLoader.getPluginByItem(item).then((result) => {\n            if (result.errorCode) {\n                throw result;\n            }\n\n            return result;\n        });\n    }\n}\n\nexport default MediaController;\n","\nexport default class FullscreenController {\n    constructor(meister) {\n        this.meister = meister;\n        // Set the custom fullscreen element should one be provided.\n        this.fullscreenElement = this.meister.defaultWrapper;\n        if (this.meister.config.customFullscreenElement) {\n            if (typeof this.meister.config.customFullscreenElement === 'string') {\n                const element = document.querySelector(this.meister.config.customFullscreenElement);\n                if (!element) {\n                    console.warn(`Unable to find fullscreen element with queryselector ${this.meister.config.customFullscreenElement}, using default element instead.`);\n                } else {\n                    this.fullscreenElement = element;\n                }\n            } else if (this.meister.config.customFullscreenElement instanceof Node) {\n                this.fullscreenElement = this.meister.config.customFullscreenElement;\n            } else {\n                console.warn('Custom fullscreen element is not of type string or Node, using default element instead.');\n            }\n        }\n        if (this.meister.config.fullscreenOnDoubleClick) {\n            if (this.meister.browser.isiOS || this.meister.browser.isAndroid) {\n                // mobile, so do a custom double tap check\n                this.tapped = null;\n                this.meister.controlsWrapper.addEventListener('touchstart', this.doubleTapCheck.bind(this));\n            } else {\n                // desktop, use the dblclick event\n                this.meister.controlsWrapper.addEventListener('dblclick', this.toggleFullscreen.bind(this));\n            }\n        }\n    }\n\n    get isFullscreen() {\n        if (!document.fullscreenElement && !document.mozFullScreenElement &&\n            !document.webkitFullscreenElement && !document.msFullscreenElement) {\n            return false;\n        }\n\n        return true;\n    }\n\n    requestFullscreen() {\n        if (!document.fullscreenElement && !document.mozFullScreenElement &&\n            !document.webkitFullscreenElement && !document.msFullscreenElement) {\n            if (this.meister.browser.isiOS) {\n                // iPad fullscreen has to go on the media element.\n                this.meister.playerPlugin.mediaElement.webkitEnterFullscreen();\n            } else if (this.fullscreenElement.requestFullscreen) {\n                this.fullscreenElement.requestFullscreen();\n            } else if (this.fullscreenElement.mozRequestFullScreen) {\n                this.fullscreenElement.mozRequestFullScreen();\n            } else if (this.fullscreenElement.webkitRequestFullscreen) {\n                this.fullscreenElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n            } else if (this.fullscreenElement.msRequestFullscreen) {\n                this.fullscreenElement.msRequestFullscreen();\n            }\n        }\n    }\n\n    cancelFullscreen() {\n        if (document.fullscreenElement) {\n            document.exitFullscreen();\n        } else if (document.cancelFullScreen) {\n            document.cancelFullScreen();\n        } else if (document.mozCancelFullScreen) {\n            document.mozCancelFullScreen();\n        } else if (document.webkitCancelFullScreen) {\n            document.webkitCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n            document.msExitFullscreen();\n        }\n        if (this.meister.browser.isiOS) {\n            // iOS fullscreen has to go on the media element.\n            this.meister.playerPlugin.mediaElement.webkitExitFullScreen();\n        }\n    }\n\n    doubleTapCheck() {\n        // if tap is not set, set up single tap\n        if (!this.tapped) {\n            // wait 300ms then run single click code\n            this.tapped = setTimeout(() => { this.tapped = null; }, 300);\n        } else {\n            // tapped within 300ms of last tap. double tap\n            // stop single tap callback\n            clearTimeout(this.tapped);\n            this.tapped = null;\n            this.toggleFullscreen();\n        }\n    }\n    toggleFullscreen() {\n        if (this.meister.isFullscreen) {\n            this.cancelFullscreen();\n        } else {\n            this.requestFullscreen();\n        }\n    }\n}\n","class Cookie {\n    static set(key, value, date = null) {\n        let expires = '';\n        \n        if (date !== null) { \n            expires = '; expires=' + date.toGMTString();\n        }\n        \n        document.cookie = key + '=' + value + expires + '; path=/';\n    }\n    \n    static get(key) {\n        let keyEQ = key + '=';\n        let ca = document.cookie.split(';');\n    \n        for (let i = 0; i < ca.length; i++) {\n            let cookie = ca[i];\n            \n            while (cookie.charAt(0) == ' ') cookie = cookie.substring(1, cookie.length);\n            if (cookie.indexOf(keyEQ) == 0) return cookie.substr(keyEQ.length, cookie.length);\n        }\n        \n        return null;\n    }\n    \n    static delete(key) {\n        this.set(key, '', -1);\n    }\n}\n\nexport default Cookie;","const errorCodes = {\n    // Plugin is unable to process items of the passed type.\n    WRONG_TYPE: 'MSTR-0001',\n    // Plugin does not play in current browser.\n    NOT_SUPPORTED: 'MSTR-0002',\n    // Media type does not support drm playback in current browser.\n    NO_DRM: 'MSTR-0003',\n    // Media not found.\n    NO_MEDIA_FOUND: 'MSTR-0404',\n    // Custom Fairplay contentId function threw an error.\n    FAIRPLAY_CONTENT_ID_FUNCTION_ERROR: 'MSTR-1001',\n};\n\nexport default errorCodes;\n","const English = {\n    VIDEO_ACQUIRING_LICENSE: 'Acquiring license..',\n    VIDEO_BUFFERING: 'Buffering...',\n    VIDEO_ACQUIRING_MANIFEST: 'Retrieving manifest..',\n    INITIALIZING: 'Initializing',\n    NONE: 'None',\n};\n\n\nexport default English;\n","const Dutch = {\n    VIDEO_ACQUIRING_LICENSE: 'Ophalen licentie..',\n    VIDEO_BUFFERING: 'Bufferen...',\n    VIDEO_ACQUIRING_MANIFEST: 'Ophalen manifest..',\n    INITIALIZING: 'Initialiseren',\n    NONE: 'Geen',\n};\n\nexport default Dutch;\n","const i18n = {\n    VIDEO_ACQUIRING_LICENSE: {\n        en: 'Acquiring license..',\n        nl: 'Ophalen licentie..',\n    },\n    VIDEO_BUFFERING: {\n        en: 'Buffering...',\n        nl: 'Bufferen...',\n    },\n    VIDEO_ACQUIRING_MANIFEST: {\n        en: 'Retrieving manifest..',\n        nl: 'Ophalen manifest...',\n    },\n    INITIALIZING: {\n        en: 'Initializing',\n        nl: 'Initialiseren',\n    },\n    NONE: {\n        en: 'None',\n        nl: 'Geen',\n    },\n};\nexport default i18n;\n","import English from './localization/default-en';\nimport Dutch from './localization/default-nl';\nimport i18nJson from './localization/i18n';\n\nlet currentLanguage = 'en';\n\nconst languageBag = {};\n\nclass Localization {\n\n    static init(i18nOn) {\n        if (i18nOn) {\n            Object.keys(i18nJson).forEach((key) => {\n                Localization.set(key, i18nJson[key], currentLanguage);\n            });\n        } else {\n            console.warn('In future Meister versions this localization method is deprecated. Set i18nEnabled to true in the Meister global object.');\n            Object.keys(English).forEach((key) => {\n                Localization.set(key, English[key], 'en');\n            });\n\n            Object.keys(Dutch).forEach((key) => {\n                Localization.set(key, Dutch[key], 'nl');\n            });\n        }\n    }\n\n    static set(key, valueOrObj, language = currentLanguage) {\n        // Create the language if it does not exist.\n        if (!languageBag[language]) {\n            languageBag[language] = {};\n        }\n        // no value or object use the key\n        let value = key;\n        if (typeof valueOrObj === 'object') {\n            // it's a object its the i18n type\n            value = valueOrObj[language];\n        } else if (typeof valueOrObj === 'string') {\n            // it's a string so use the deprecated method\n            value = valueOrObj;\n        }\n        languageBag[language][key] = value;\n    }\n\n    static get(key, language = currentLanguage) {\n        return languageBag[language][key];\n    }\n\n    static all(language = currentLanguage) {\n        return languageBag[language];\n    }\n\n    static setLanguage(lang) {\n        currentLanguage = lang;\n    }\n}\n\nexport default Localization;\n","import ProtoPlugin from './ProtoPlugin';\nimport EventDefaults from '../events/default-events';\n\nclass Analytics extends ProtoPlugin {\n    isAnalytics() {\n\n    }\n\n    load() {\n        for (let i = 0; i < EventDefaults.length; i++) {\n            const eventHandle = EventDefaults[i];\n            const uppercasedHandle = eventHandle.charAt(0).toUpperCase() + eventHandle.substring(1);\n            const funcName = `on${uppercasedHandle}`;\n\n            if (this[funcName]) {\n                this.on(eventHandle, (e) => this[funcName](e));\n            }\n        }\n    }\n\n    unload() {\n        super.unload();\n    }\n}\n\nexport default Analytics;\n","import ProtoPlugin from './ProtoPlugin';\n\nclass Parser extends ProtoPlugin {\n    isItemSupported() {\n        return new Promise((resolve) => resolve({\n            supported: false,\n            errorCode: Meister.ErrorCodes.WRONG_TYPE,\n        }));\n    }\n\n    process(item) {\n        return new Promise((resolve) => {\n            console.error('Process not implemented. Player may not play correctly.');\n            resolve(item);\n        });\n    }\n\n    unload() {\n        super.unload();\n    }\n}\n\nexport default Parser;\n","import ProtoPlugin from './ProtoPlugin';\nimport Cookie from '../lib/triple/cookie';\n\nclass Player extends ProtoPlugin {\n    constructor(config, meister) {\n        super(config, meister);\n\n        this.wrapper = this.meister.playerWrapper;\n\n        this.mediaElement = null;\n    }\n\n    isTypeSupported() {\n        return false;\n    }\n\n    load() {\n        this.on('requestPlay', this.play.bind(this));\n        this.on('requestPause', this.pause.bind(this));\n\n        this.one('playerCreated', () => {\n            const cookieVolume = Cookie.get('volume');\n\n            if (cookieVolume) {\n                this.volume = cookieVolume;\n            }\n        });\n    }\n\n    unload() {\n        super.unload();\n        this.mediaElement = null;\n    }\n\n    hide() {\n        this.mediaElement.style.display = 'none';\n    }\n\n    show() {\n        this.mediaElement.style.display = 'block';\n    }\n\n    play() {\n\n    }\n\n    pause() {\n\n    }\n\n    get currentTime() {\n        console.warn('currentTime getter is not defined.');\n    }\n\n    set currentTime(time) {\n        console.warn(`currentTime setter is not defined. Can't process ${time}.`);\n    }\n\n    get duration() {\n        console.warn('duration getter is not defined.');\n    }\n\n    get playing() {\n        console.warn('playing getter is not defined.');\n    }\n\n    get buffered() {\n        console.warn('bufferd getter is not defined.');\n    }\n\n    get controls() {\n        console.warn('controls getter is not defined.');\n    }\n\n    set controls(controls) {\n        console.warn(`controls setter is not defined. Can't process ${controls}.`);\n    }\n\n    get currentSrc() {\n        console.warn('currentSrc getter is not defined.');\n    }\n\n    set currentSrc(url) {\n        console.warn(`currentSrc setter is not defined. Can't process ${url}.`);\n    }\n}\n\nexport default Player;\n","import ProtoPlugin from './ProtoPlugin';\n\nclass Ui extends ProtoPlugin {\n    constructor(config, meister) {\n        super(config, meister);\n\n        this.controlsWrapper = this.meister.controlsWrapper;\n\n        this.element = null;\n    }\n}\n\nexport default Ui;\n","import ProtoPlugin from './ProtoPlugin';\n\nclass UiPlugin extends ProtoPlugin {\n    constructor(config, meister) {\n        super(config, meister);\n\n        this.element = null;\n\n        const querySelector = this.config.parentSelector;\n        if (querySelector) {\n            this.parentElement = document.querySelector(querySelector);\n\n            if (!this.parentElement) {\n                console.warn(`Unable to find element with parentSelector '${querySelector}', ${this.name} is disabled.`);\n                return;\n            }\n        } else {\n            this.one('uiReady', (e) => this.onUiReady(e));\n        }\n    }\n\n    onPluginOpen(e) {\n        if (e.name !== this.name) {\n            return;\n        }\n\n        this.element.classList.remove('pf-ui-element-hidden');\n    }\n\n    onPluginClose() {\n        this.element.classList.add('pf-ui-element-hidden');\n    }\n\n    onUiReady(e) {\n        const parent = e.pluginSpace;\n\n        parent.appendChild(this.element);\n        this.element.classList.add('pf-ui-element-hidden');\n\n        // Only listen to these events once attached.\n        this.on('uiPluginOpen', this.onPluginOpen.bind(this));\n        this.on('uiPluginClose', this.onPluginClose.bind(this));\n\n        this.meister.trigger('uiPluginInserted', {\n            icon: this.config.icon,\n            name: this.name,\n        });\n    }\n\n    draw() {\n        if (this.parentElement) {\n            this.parentElement.appendChild(this.element);\n        }\n    }\n}\n\nexport default UiPlugin;\n","import ProtoPlugin from './ProtoPlugin';\n\nclass Middleware extends ProtoPlugin {\n    isItemSupported() {\n        return new Promise((resolve) => resolve({\n            supported: false,\n            errorCode: Meister.ErrorCodes.WRONG_TYPE,\n        }));\n    }\n\n    process(item) {\n        return new Promise((resolve) => {\n            resolve(item);\n        });\n    }\n}\n\nexport default Middleware;\n","import PluginLoader from './PluginLoader';\nimport Configuration from './Configuration';\nimport EventHandler from './lib/triple/event-handler';\nimport EventDefaults from './events/default-events';\nimport InstanceBag from './InstanceBag';\nimport ExtraEvents from './ExtraEvents';\nimport Utils, { isDOMNode } from './utils/Utils';\n// import DRMUtils from './utils/DRMUtils';\nimport ElementUtils from './utils/ElementUtils';\nimport Browser from './utils/Browser';\nimport BrowserPolyfill from './utils/BrowserPolyfill';\nimport Playlist from './Playlist';\nimport MediaController from './MediaController';\nimport FullscreenController from './FullscreenController';\nimport Cookie from './lib/triple/cookie';\nimport errorCodes from './errorCodes';\nimport Localization from './Localization';\n// import {setDebug} from './Debug';\n\n// Abstract Plugins\nimport Analytics from './plugin-types/Analytics';\nimport Media from './plugin-types/Media';\nimport Parser from './plugin-types/Parser';\nimport Player from './plugin-types/Player';\nimport Ui from './plugin-types/Ui';\nimport UiPlugin from './plugin-types/UiPlugin';\nimport Middleware from './plugin-types/Middleware';\nimport ProtoPlugin from './plugin-types/ProtoPlugin';\n\n// HACK for IE11 iFrames.\nif (window !== window.top) {\n    console.warn = console.log.bind(console);\n    console.error = console.log.bind(console);\n}\n\nlet instances = [];\n\nclass Meister {\n    /**\n     * Create a new player instance.\n     *\n     * @param {string} query for finding the element that meister will use to render the player.\n     * @param {object} options for meisterjs. Also required for initializing plugins.\n     */\n    constructor(query, userOptions) {\n        // Make sure we at least have a wrapper or else the player can't continue.\n\n        // create the options by merging the default with the user options\n        const defaultOptions = {\n            global: {},\n        };\n        const options = Object.assign({}, defaultOptions, userOptions);\n\n        // checks if the query is a DOM element, otherwise querySelector the query string\n        if (isDOMNode(query)) {\n            this.wrapper = query;\n        } else {\n            this.wrapper = document.querySelector(query);\n        }\n\n        if (!this.wrapper) {\n            throw Error(`Wrapper with Queryseletor: ${query} not found.`);\n        }\n\n        // Instantiate the event handler and utilities.\n        this.eventHandler = new EventHandler(EventDefaults);\n        this.instanceId = Math.random();\n        InstanceBag.add('eventHandler', this.eventHandler);\n\n        this.utils = Utils;\n        // this.DRMUtils = DRMUtils;\n        this.elementUtils = ElementUtils;\n        this.browser = Browser;\n        this.Localization = Localization;\n\n        BrowserPolyfill.init();\n\n        // Extract global config\n        this.config = Configuration.getGlobals(options.global);\n        if (this.config.language) {\n            this.Localization.setLanguage(this.config.language);\n        }\n        this.Localization.init(this.config.i18nEnabled);\n\n        // Enable autoplay\n        if (this.config.autoplay) {\n            // Disable the first autoplay on mobile, so that ads will display\n            if (this.browser.isMobile) {\n                const wasAutoplay = this.config.autoplay;\n                this.config.autoplay = false;\n                this.one('playerPlay', () => {\n                    this.config.autoplay = wasAutoplay;\n                    this.on('itemLoaded', () => this.trigger('requestPlay'), 'meister');\n                }, 'meister');\n            } else {\n                this.on('itemLoaded', () => this.trigger('requestPlay'), 'meister');\n            }\n        }\n\n        if (this.config.fullscreenOnDoubleClick) {\n            this.config.iosPlaysInline = true;\n        }\n        // Set logging level\n        // this.debugEnabled = this.config.debug;\n\n        this.container = document.createElement('div');\n        this.defaultWrapper = document.createElement('div');\n        this.playerWrapper = document.createElement('div');\n        this.controlsWrapper = document.createElement('div');\n        this.adWrapper = document.createElement('div');\n\n        this.container.classList.add('pf-player-container');\n        this.defaultWrapper.classList.add('pf-default-wrapper');\n        this.playerWrapper.classList.add('pf-player');\n        this.controlsWrapper.classList.add('pf-controls');\n        if (!this.config.controls) this.controlsWrapper.classList.add('pf-ui-element-hidden');\n        this.elementUtils.classListAdd(this.adWrapper, 'pf-ads', 'pf-ui-element-hidden');\n\n        this.wrapper.appendChild(this.container);\n        this.container.appendChild(this.defaultWrapper);\n        this.defaultWrapper.appendChild(this.playerWrapper);\n        this.defaultWrapper.appendChild(this.controlsWrapper);\n        this.defaultWrapper.appendChild(this.adWrapper);\n\n\n        Configuration.overwrite(options);\n\n        this.pluginLoader = new PluginLoader(this);\n        this.pluginLoader.config(options, this);\n\n        // PluginLoader.config(options, this);\n\n        this.pluginLoader.drawUiPlugins();\n        this.pluginLoader.loadAnalyticsPlugins();\n\n        ExtraEvents.register(this);\n\n        this.playerPlugin = null;\n        this.playlist = null;\n\n        this.mediaController = new MediaController(this);\n        this.fullscreenController = new FullscreenController(this);\n\n        this.on('requestDrmKeySystemSupport', () => {\n            this.trigger('drmKeySystemSupport', []);\n        });\n\n        instances.push({\n            id: this.instanceId,\n            instance: this,\n        });\n    }\n\n    /**\n     * Gets the current Meister version.\n     *\n     * @return {string} The meister version.\n     */\n    static get version() {\n        return 'v4.9.3';\n    }\n\n    /**\n     * Is Debug mode enabled\n     *\n     * @return {boolean} Return true if debug is enabled.\n     */\n    get debugEnabled() {\n        return this.config.debug;\n    }\n\n    /**\n     * Sets debug mode.\n     *\n     * @param  {boolean} debug true for debug mode.\n     */\n    set debugEnabled(debug) {\n        // setDebug(debug);\n        this.config.debug = debug;\n    }\n\n    get showControls() {\n        return this.config.controls;\n    }\n\n    set showControls(controls) {\n        if (controls) {\n            this.controlsWrapper.classList.remove('pf-ui-element-hidden');\n        } else {\n            this.controlsWrapper.classList.add('pf-ui-element-hidden');\n        }\n\n        this.config.controls = controls;\n    }\n\n    load() {\n        this.playlist.loadCurrentIndex();\n    }\n\n    /**\n     * Destroys the instance of the player and it's plugins.\n     */\n    destroy() {\n        // Remove the player from the page.\n        this.wrapper.innerHTML = '';\n\n        this.trigger('requestDestroy');\n        // HACK: fix this hack! Because requestDestroy refers to this.playerPlugin (via get playing) it throws an error when playerPlugin is nulled.. By using setTimeout 0 we effectively added nullifying on the eventstack\n        setTimeout(() => {\n            this.pluginLoader = null;\n            this.playerPlugin = null;\n            this.playlist = null;\n            this.mediaController = null;\n            this.fullscreenController = null;\n\n            instances = instances.filter(instance => instance.id === this.id);\n        }, 0);\n    }\n\n    play(triggerByUser = false) {\n        // Do this through events so ads have a chance to register\n        this.trigger('requestPlay', { triggerByUser });\n    }\n\n    pause(triggerByUser = false) {\n        this.trigger('requestPause', { triggerByUser });\n    }\n\n    get playerMode() {\n        return this.config.audioOnly ? 'audio' : 'video';\n    }\n\n    get volume() {\n        if (!this.playerPlugin) return null;\n\n        return this.playerPlugin.volume;\n    }\n\n    set volume(volume) {\n        if (!this.playerPlugin) return;\n\n        Cookie.set('volume', volume);\n        this.playerPlugin.volume = volume;\n    }\n\n    get muted() {\n        if (!this.playerPlugin) return null;\n\n        return this.playerPlugin.muted;\n    }\n\n    set muted(muted) {\n        if (!this.playerPlugin) return;\n\n        this.playerPlugin.muted = muted;\n    }\n\n    get playing() {\n        if (!this.playerPlugin) return null;\n\n        return this.playerPlugin.playing;\n    }\n\n    get currentItem() {\n        if (!this.mediaController) return null;\n\n        return this.mediaController.currentItem;\n    }\n\n    get duration() {\n        if (!this.playerPlugin) return null;\n\n        return this.playerPlugin.duration;\n    }\n\n    get currentTime() {\n        if (!this.playerPlugin) return null;\n\n        return this.playerPlugin.currentTime;\n    }\n\n    set currentTime(time) {\n        if (!this.playerPlugin) return;\n\n        this.playerPlugin.currentTime = time;\n    }\n\n    get isFullscreen() {\n        if (!this.fullscreenController) return null;\n        return this.fullscreenController.isFullscreen;\n    }\n\n    requestFullscreen() {\n        if (!this.fullscreenController) return;\n        this.fullscreenController.requestFullscreen();\n    }\n\n    cancelFullscreen() {\n        if (!this.fullscreenController) return;\n        this.fullscreenController.cancelFullscreen();\n    }\n\n    getPlayerByType(type, mediaItem) {\n        const playerPlugin = this.pluginLoader.getPlayerPluginByType(type, mediaItem);\n\n        if (this.playerPlugin) {\n            if (this.playerPlugin && this.playerPlugin.name !== playerPlugin.name) {\n                this.playerPlugin.unload();\n                this.playerWrapper.innerHTML = '';\n                this.playerPlugin = playerPlugin;\n                this.playerPlugin.load(mediaItem);\n            }\n        } else if (playerPlugin) {\n            this.playerPlugin = playerPlugin;\n            this.playerPlugin.load(mediaItem);\n        } else {\n            console.warn(`Could not find player with type '${type}'`);\n        }\n\n        return this.playerPlugin;\n    }\n\n    /**\n     * Sets the item.\n     *\n     * @param {object} item The item you want to play.\n     */\n    setItem(item) {\n        if (!item.type) {\n            throw new TypeError('Item must have a type attribute.');\n        } else if (item.type !== 'aditem' && item.type !== 'multi-source' && !item.src) {\n            throw new TypeError('Non-aditem items must have a src attribute.');\n        }\n\n        this.playlist = new Playlist([item], this);\n    }\n\n    setPlaylist(list) {\n        for (let i = 0; i < list.length; i++) {\n            if (!list[i].type) {\n                throw new TypeError(`Item ${i}: Item must have a type attribute.`);\n            } else if (list[i].type !== 'aditem'\n                && list[i].type !== 'multi-source'\n                && !list[i].src) {\n                throw new TypeError(`Item ${i}: Non-aditem items must have a src attribute.`);\n            }\n        }\n\n        this.playlist = new Playlist(list, this);\n    }\n\n    switchItem(item) {\n        this.mediaController.switchItem(item);\n    }\n\n    // Event handler shorthands.\n    on(hook, handler, caller) {\n        return this.eventHandler.on(hook, handler, caller);\n    }\n\n    one(hook, block, handler, caller) {\n        return this.eventHandler.one(hook, block, handler, caller);\n    }\n\n    trigger(...args) {\n        this.eventHandler.trigger(...args);\n    }\n\n    remove(events) {\n        this.eventHandler.remove(events);\n    }\n\n    disable(hook, callback) {\n        this.eventHandler.disable(hook, callback);\n    }\n\n    enable(hook, callback) {\n        this.eventHandler.enable(hook, callback);\n    }\n\n    error(message, code = 'ERR-9001', options = {}) {\n        console.error(`${code} - ${message}`);\n        this.eventHandler.trigger('error', {\n            message,\n            code,\n            options,\n        });\n    }\n\n    // Static methods.\n    static registerPlugin(name, plugin) {\n        return PluginLoader.register(name, plugin);\n    }\n\n    static registerMiddleware(name, plugin) {\n        return PluginLoader.registerMiddleware(name, plugin);\n    }\n\n    static get instances() {\n        return instances;\n    }\n}\n\nwindow.Meister = Meister;\n\n// Expose a way to extend\nMeister.MediaPlugin = Media;\nMeister.ParserPlugin = Parser;\nMeister.PlayerPlugin = Player;\nMeister.Ui = Ui;\nMeister.UiPlugin = UiPlugin;\nMeister.AnalyticsPlugin = Analytics;\nMeister.Middleware = Middleware;\nMeister.ProtoPlugin = ProtoPlugin;\n\n// Expose utils.\n// Meister.DRMUtils = DRMUtils;\nMeister.Browser = Browser;\n\n// Expose error codes.\nMeister.ErrorCodes = errorCodes;\n\n// TODO: Make this cleaner.\nMeister.PluginLoader = PluginLoader;\nMeister.Configuration = Configuration;\n\n// Backwards compatibility\nwindow.Vinson = Meister;\n\nexport default Meister;\n"],"names":["ENVIRONMENT","store","Configuration","key","value","options","keys","forEach","global","plugins","plugin","config","ProtoPlugin","meister","name","eventStore","on","destroy","bind","hook","handler","push","block","one","remove","unload","Media","Promise","resolve","Meister","ErrorCodes","WRONG_TYPE","item","warn","debug","log","type","src","Number","isFinite","startPosition","playerLoadedMetadata","blockSeekForward","player","duration","trigger","error","Parallel","bitrates","currentBitrateIndex","reject","processPromises","Math","floor","length","sampleItem","metadata","sort","a","b","bitrate","selectableBitrates","i","default","pluginLoader","getPluginByItem","then","itemPlugin","errorCode","title","getPluginsPromises","process","parallel","parallelItem","all","index","catch","err","load","onRequestBitrate","info","bitrateIndex","changeBitrate","switchTime","currentTime","wasPlaying","playing","play","newBitrate","currentItem","MediaPlugin","registered","loaded","registeredMiddleware","PluginLoader","find","instance","newOptions","builtIn","assign","get","pluginConfig","next","execMiddleware","middleware","Plugin","drmConfig","isItemSupportedPromises","pluginsInConsideration","isItemSupported","isSupported","items","supportInfo","supported","playerPlugin","isTypeSupported","draw","isAnalytics","middlewares","result","middlewareObject","getMiddleware","Middleware","processMiddlewares","newItem","Error","noop","EventHandler","eventHooks","counter","disabledHandles","protectedHandles","stack","eventHook","hooks","method","caller","Function","Array","newHandles","newHandle","_createHandler","id","events","eventObject","removed","splice","args","indexOf","single","apply","e","eventHandle","callback","hookIndex","AdEvents","ControlEvents","ItemEvents","GlobalEvents","PlayerEvents","PlaylistEvents","UiEvents","EventDefaults","InstanceBag","ExtraEvents","meisterInstance","onfocus","eventHandler","onblur","addEventListener","document","visibilityState","timeToHMS","time","isNaN","hours","minutes","seconds","bitrateToResolution","NaN","kbps","resolveUrl","basePath","path","oldBase","querySelector","docHead","createElement","base","oldHref","href","appendChild","removeChild","isDOMNode","node","HTMLElement","nodeType","babelHelpers.typeof","style","ownerDocument","ElementUtils","element","classNames","className","classList","add","Browser","userAgent","navigator","browserInfo","uaRegEx","parts","match","extra","test","exec","version","parseInt","parseFloat","appName","appVersion","isSafari","isEdge","isChrome","isChrome64","isFirefox","isLegacyIE","window","ActiveXObject","isIE","isIE11","isChromecast","isMobile","isiOS","isAndroid","isWindowsPhone","isWin8App","isWiiU","isPS4","isSamsungBrowser","isSamsung","isMacintosh","BrowserPolyfill","Element","prototype","parentNode","Playlist","list","previous","goTo","autoplay","getPluginFor","ParserPlugin","newList","slice","loadCurrentIndex","switchItem","newIndex","MediaController","currentPlugin","adBreakPlaying","disableLoadDuringAd","processedItem","promise","loadNewItem","FullscreenController","fullscreenElement","defaultWrapper","customFullscreenElement","Node","fullscreenOnDoubleClick","browser","tapped","controlsWrapper","doubleTapCheck","toggleFullscreen","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","mediaElement","webkitEnterFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","ALLOW_KEYBOARD_INPUT","msRequestFullscreen","exitFullscreen","cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen","webkitExitFullScreen","setTimeout","isFullscreen","cancelFullscreen","Cookie","date","expires","toGMTString","cookie","keyEQ","ca","split","charAt","substring","substr","set","errorCodes","English","Dutch","i18n","currentLanguage","languageBag","Localization","i18nOn","i18nJson","valueOrObj","language","lang","Analytics","uppercasedHandle","toUpperCase","funcName","Parser","Player","wrapper","playerWrapper","pause","cookieVolume","volume","display","controls","url","Ui","UiPlugin","parentSelector","parentElement","onUiReady","parent","pluginSpace","onPluginOpen","onPluginClose","icon","top","console","instances","query","userOptions","defaultOptions","Object","instanceId","random","utils","Utils","elementUtils","init","getGlobals","setLanguage","i18nEnabled","wasAutoplay","iosPlaysInline","container","adWrapper","classListAdd","overwrite","drawUiPlugins","loadAnalyticsPlugins","register","playlist","mediaController","fullscreenController","innerHTML","filter","triggerByUser","mediaItem","getPlayerPluginByType","TypeError","disable","enable","message","code","audioOnly","muted","registerMiddleware","PlayerPlugin","AnalyticsPlugin","Vinson"],"mappings":"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"}